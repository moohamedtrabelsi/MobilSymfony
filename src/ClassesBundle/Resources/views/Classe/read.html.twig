{#Changer "admin" par "back" pour changer de template#}
{% extends 'backend/index.html.twig' %}
   {% block content %}
       <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
       <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
       <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
       <!------ Include the above in your HEAD tag ---------->

       <script language="JavaScript" src="https://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
       <script language="JavaScript" src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js" type="text/javascript"></script>
       <script language="JavaScript" src="https://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js" type="text/javascript"></script>
       <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

       <link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.css">

       <br>
       <br>
       {% block body %}
           <h1 style=" position: relative; right: -30px">  liste des classes </h1>
{#           <input style="width: 400px" class="form-control" id="myInput" type="text" placeholder="Search..">#}
           <input style="width: 400px" class="form-control" id="hethi" type="text" placeholder="Search..">
           <br>
           <table class="table table-bordered table-striped">
               <thead>
               <tr>

                   <th class="th-sm">Id</th>
                   <th class="th-sm">Nom</th>
                   <th class="th-sm">Branche</th>
                   <th class="th-sm">Nbr Etudiants </th>


                   <th class="th-sm">Actions</th>
                   <th class="th-sm">Voir Etudiants inscrits</th>

               </tr>
               </thead>
               <tbody id="myTable">
               {% for i in liste %}
                   <tr>

                       <td>{{i.id}}</td>
                       <td>{{ i.nom }}</td>
                       <td>{{ i.branche.nom }}</td>
                       <td>{{ i.nbrEtudiants  }}</td>

                       <td>
                           <div style=" display: flex;
  align-content: space-between;">


                               <a class="text-sm-center " href="{{ path('classe_update', { 'id': i.id }) }}"><p data-placement="top" data-toggle="tooltip" title="modifier"><button class="btn btn-success btn-s" data-title="edit" data-toggle="modal" data-target="#edit" ><span class="glyphicon glyphicon-edit"></span></button></p></a>
                               <a class="text-sm-right" href="{{ path('classe_delete', { 'id': i.id }) }}"><p data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-s" data-title="Delete" data-toggle="modal" data-target="#delete" ><span class="glyphicon glyphicon-trash"></span></button></p></a>
                       <td><a href="{{ path('classe_etudiants',{'id':i.id}) }}"><button>Voir Etudiants</button></a></td>
                           </div>
                       </td>

                   </tr>
               {% endfor %}
               </tbody>
           </table>
           <div class="navigation">
               {{ knp_pagination_render(liste) }}
           </div>
           <div id="div_chart"></div>

           <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
           <script type="text/javascript">
               {{ gc_draw(piechart, 'div_chart') }}
           </script>



       {% endblock %}

{#       <script>#}
{#           $(document).ready(function(){#}
{#               $("#myInput").on("keyup", function() {#}
{#                   var value = $(this).val().toLowerCase();#}
{#                   $("#myTable tr").filter(function() {#}
{#                       $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)#}
{#                   });#}
{#               });#}
{#           });#}
{#       </script>#}
       <script
               src="https://code.jquery.com/jquery-3.4.1.min.js"
               integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
               crossorigin="anonymous">

       </script>

       <script>
           $(function() {
               $("#hethi").keyup(function () {
                   $.ajax({
                       url : "{{ path('classe_recherche') }}",
                       type: "get",
                       data : { 'search' : $(this).val() }
                   }).done(function (response) {
                       var tableau = $(response).find("table");
                       $('table').empty();
                       $('table').append(tableau);
                   })
               });
           })
       </script>

   {% endblock %}